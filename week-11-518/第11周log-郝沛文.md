# Week11 工作日志

本周在github上对\zballs\goPBFT项目做了修改

## golang源代码

先是阅读goPBFT的源代码，我学到了很多数据结构的定义方式，参考论文也理解其工作原理。在实际阅读过程中渐渐熟悉golang的编程逻辑，和一些细节的语法问题，所以编程还是讲究实战。回到goPBFT，整个代码仅仅定义了消息数据结构、消息处理方法，并无main包，即共识过程的函数，所以我的任务就是将节点初始化后完成共识过程的构建。

## 建立tcp连接通信

前几天我搜索到一个通过curl发送post请求，然通过"net/http"包里的HandleFunc来接受POST请求的方法进行4节点共识的方法，我希望效仿此方法对goPBFT项目的代码进行修改和编写main包。现在正在做的是newreplicas方法的改写，这里面涉及到一系列初始化，节点和client的初始化已经完成，还需要对消息信道、请求、以及消息buffer的初始化使其进入就绪状态，能接受到post请求。

后来我使用了tcp通信手段，直接对每个节点的初始化时监听一个tcp端口，并在其他节点加入时向所有已有的端口进行广播。


